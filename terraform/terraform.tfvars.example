# Example Terraform Variables Configuration
# Copy this file to terraform.tfvars and fill in your actual values
# WARNING: terraform.tfvars is gitignored and should NEVER be committed

# ============================================================================
# REQUIRED VARIABLES
# ============================================================================

# Cloudflare API token for DNS management (required for Caddy ACME DNS-01 challenge)
# Get this from: https://dash.cloudflare.com/profile/api-tokens
# Required scopes: Zone:DNS:Edit
cloudflare_api_token = "your-cloudflare-api-token-here"

# Grafana admin password (must be at least 12 characters)
# IMPORTANT: Use a strong, unique password. This will be used to access Grafana at grafana.accuser.dev
# Generate a secure password: openssl rand -base64 16
grafana_admin_password = "your-secure-grafana-password-here"

# IP range allowed to access public services (Grafana, etc.)
# REQUIRED: Set to your home/office network CIDR for security
# Examples:
#   - Single IP: "203.0.113.50/32"
#   - Home network: "192.168.1.0/24"
#   - Office range: "10.0.0.0/8"
#   - Allow all (NOT recommended): "0.0.0.0/0"
allowed_ip_range = "192.168.1.0/24"

# ============================================================================
# OPTIONAL NETWORK CONFIGURATION
# ============================================================================
# Override these if you need different network ranges
# Default values are shown below - uncomment to customize

# Production Network (default: 10.10.0.1/24, bridge mode, IPv6 disabled)
# The production network hosts public-facing services like Mosquitto.
#
# Two modes are supported:
#   - bridge (default): NAT'd network, services exposed via proxy devices
#   - physical: Direct LAN attachment for IncusOS clusters
#
# Bridge Mode (default):
# production_network_type     = "bridge"
# production_network_ipv4     = "10.10.0.1/24"
# production_network_nat      = true
# production_network_ipv6     = "fd00:10:10::1/64"  # Uncomment to enable IPv6
# production_network_ipv6_nat = true
#
# Physical Mode (for IncusOS with direct LAN attachment):
# Containers on production network get LAN IPs directly via DHCP/static.
# No proxy devices needed - services are directly accessible on the LAN.
# production_network_type   = "physical"
# production_network_parent = "enp5s0"  # Your physical LAN interface name

# Management Network (default: 10.20.0.1/24, IPv6 disabled)
# Hosts internal services like Grafana, Loki, Prometheus
# management_network_ipv4     = "10.20.0.1/24"
# management_network_nat      = true
# management_network_ipv6     = "fd00:10:20::1/64"  # Uncomment to enable IPv6
# management_network_ipv6_nat = true

# ============================================================================
# OPTIONAL: CLOUDFLARE TUNNEL (Zero Trust)
# ============================================================================
# Enable secure remote access via Cloudflare Tunnel
# Get token from: Cloudflare Zero Trust Dashboard -> Access -> Tunnels
# Leave empty to disable Cloudflared deployment

# cloudflared_tunnel_token = "eyJhIjoiYWJj..."  # Your tunnel token

# ============================================================================
# OPTIONAL: INCUS METRICS
# ============================================================================
# Configure scraping of Incus container metrics (CPU, memory, disk, network)
# Metrics are collected via the Incus API with mTLS authentication

# Enable/disable Incus metrics collection (default: true)
# enable_incus_metrics = true

# Incus API endpoint for metrics (default: management network gateway)
# incus_metrics_address = "10.50.0.1:8443"

# Server name for TLS verification (leave empty for self-signed certs)
# If your Incus server has ACME configured, set this to its domain
# incus_metrics_server_name = "incus.example.com"

# ============================================================================
# OPTIONAL: INCUS LOGGING TO LOKI
# ============================================================================
# Enable native Incus logging to Loki (lifecycle events, container logs)
# This is a server-level configuration that sends events directly to Loki

# Enable/disable Incus native logging to Loki (default: true)
# enable_incus_loki = true

# ============================================================================
# OPTIONAL: GITOPS WITH ATLANTIS
# ============================================================================
# Enable PR-based infrastructure management with Atlantis
# Atlantis runs on a dedicated network with GitHub webhook integration
# See GITOPS.md for full setup instructions

# Enable GitOps infrastructure (default: false)
# enable_gitops = true

# Domain for Atlantis webhook endpoint (required if enable_gitops = true)
# atlantis_domain = "atlantis.example.com"

# GitHub username or app ID for Atlantis
# atlantis_github_user = "your-github-username"

# GitHub Personal Access Token (PAT) with 'repo' scope
# Create at: https://github.com/settings/tokens
# atlantis_github_token = "ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"

# Webhook secret for validating GitHub webhook payloads
# Generate with: openssl rand -hex 32
# atlantis_github_webhook_secret = "your-generated-webhook-secret"

# Repositories Atlantis is allowed to manage (default: ["github.com/accuser-dev/atlas"])
# atlantis_repo_allowlist = ["github.com/your-org/your-repo"]

# ============================================================================
# USAGE INSTRUCTIONS
# ============================================================================
# 1. Copy this file: cp terraform.tfvars.example terraform.tfvars
# 2. Edit terraform.tfvars and replace placeholder values:
#    - Set your Cloudflare API token
#    - Set a strong Grafana admin password (min 12 characters)
# 3. Optionally customize network ranges if needed
# 4. Never commit terraform.tfvars (it's in .gitignore)
# 5. Run: terraform init && terraform plan
