#cloud-config
# PostgreSQL system container - minimal bootstrap for Ansible
# Only installs Python dependencies; PostgreSQL installed by Ansible

package_update: true
package_upgrade: false

packages:
  - python3
  - python3-apt
  - python3-pip
  - curl

runcmd:
  # Ensure python3 is the default
  - update-alternatives --install /usr/bin/python python /usr/bin/python3 1
  # Signal that cloud-init is complete and Ansible can proceed
  - touch /var/lib/cloud/instance/ansible-ready
