# Custom PostgreSQL configuration
# Auto-generated by Ansible

listen_addresses = '*'
port = {{ postgresql_port }}

# Memory settings (adjust based on container limits)
shared_buffers = 128MB
work_mem = 4MB
maintenance_work_mem = 64MB

# Logging
log_destination = 'stderr'
logging_collector = on
log_directory = 'log'
log_filename = 'postgresql-%Y-%m-%d.log'
log_rotation_age = 1d
log_rotation_size = 100MB
log_min_duration_statement = 1000

# Connection settings
max_connections = 100

{% if postgresql_config_base64 | default('') | length > 0 %}
{{ postgresql_config_base64 | b64decode }}
{% endif %}
