; Forgejo configuration
; Auto-generated by Ansible - do not edit manually

APP_NAME = {{ forgejo_app_name }}
RUN_MODE = prod
RUN_USER = {{ forgejo_user }}

[server]
{% if forgejo_enable_tls %}
PROTOCOL = https
CERT_FILE = {{ forgejo_config_dir }}/cert.pem
KEY_FILE = {{ forgejo_config_dir }}/key.pem
{% else %}
PROTOCOL = http
{% endif %}
DOMAIN = {{ forgejo_domain }}
ROOT_URL = {{ forgejo_root_url if forgejo_root_url else ('https' if forgejo_enable_tls else 'http') + '://' + forgejo_domain + '/' }}
HTTP_PORT = {{ forgejo_http_port }}
{% if forgejo_enable_ssh %}
DISABLE_SSH = false
SSH_DOMAIN = {{ forgejo_domain }}
SSH_PORT = {{ forgejo_ssh_port }}
SSH_LISTEN_PORT = {{ forgejo_ssh_port }}
START_SSH_SERVER = true
SSH_LISTEN_HOST = 0.0.0.0
{% else %}
DISABLE_SSH = true
{% endif %}
LFS_START_SERVER = true
LFS_JWT_SECRET_URI = file:{{ forgejo_data_dir }}/lfs_jwt_secret

[database]
{% if forgejo_database_type == "postgres" %}
DB_TYPE = postgres
HOST = {{ forgejo_database_host }}:{{ forgejo_database_port }}
NAME = {{ forgejo_database_name }}
USER = {{ forgejo_database_user }}
PASSWD = {{ forgejo_database_password }}
SSL_MODE = disable
{% else %}
DB_TYPE = sqlite3
PATH = {{ forgejo_data_dir }}/data/forgejo.db
{% endif %}

[repository]
ROOT = {{ forgejo_repositories_dir }}

[lfs]
PATH = {{ forgejo_data_dir }}/data/lfs

[log]
MODE = console
LEVEL = Info
ROOT_PATH = {{ forgejo_log_dir }}

[security]
INSTALL_LOCK = true
SECRET_KEY_URI = file:{{ forgejo_data_dir }}/secret_key
INTERNAL_TOKEN_URI = file:{{ forgejo_data_dir }}/internal_token

[service]
DISABLE_REGISTRATION = false
REQUIRE_SIGNIN_VIEW = false
ENABLE_NOTIFY_MAIL = false

[mailer]
ENABLED = false

[session]
PROVIDER = file
PROVIDER_CONFIG = {{ forgejo_data_dir }}/data/sessions

[picture]
AVATAR_UPLOAD_PATH = {{ forgejo_data_dir }}/data/avatars
REPOSITORY_AVATAR_UPLOAD_PATH = {{ forgejo_data_dir }}/data/repo-avatars

[attachment]
PATH = {{ forgejo_data_dir }}/data/attachments

[actions]
ENABLED = true

{% if forgejo_enable_metrics %}
[metrics]
ENABLED = true
{% if forgejo_metrics_token %}
TOKEN = {{ forgejo_metrics_token }}
{% endif %}
{% endif %}
