# =============================================================================
# Ansible Configuration for Atlas Infrastructure
# =============================================================================
# Uses Incus connection plugin for container management.
# No SSH required - connects via `incus exec` under the hood.

[defaults]
# Inventory
inventory = inventory/terraform.py

# Roles path
roles_path = roles

# Reduce noise
deprecation_warnings = False
command_warnings = False

# Gathering facts
gathering = smart
fact_caching = jsonfile
fact_caching_connection = .ansible_cache
fact_caching_timeout = 86400

# Performance
forks = 10
pipelining = True

# Output
stdout_callback = yaml
callback_enabled = timer

# Don't create .retry files
retry_files_enabled = False

# Host key checking (not needed for Incus connection)
host_key_checking = False

[privilege_escalation]
become = True
become_method = sudo
become_user = root
become_ask_pass = False

[connection]
# Default connection type for Incus containers
# Can be overridden per host in inventory

[incus_connection]
# Incus connection plugin settings
# Remote is set dynamically based on ENV variable
